<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Learn 520 French Words with Pronunciation</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #4A90E2 0%, #E8F4F8 50%, #E57373 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        header {
            text-align: center;
            color: #2C5AA0;
            margin-bottom: 30px;
            padding: 20px;
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            border: 3px solid #4A90E2;
        }

        h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(74, 144, 226, 0.3);
        }

        .subtitle {
            font-size: 1.2em;
            opacity: 0.9;
        }

        .controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-bottom: 30px;
            flex-wrap: wrap;
            align-items: center;
        }

        .language-toggle {
            background: white;
            border: none;
            padding: 12px 24px;
            border-radius: 25px;
            font-size: 16px;
            cursor: pointer;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            display: flex;
            align-items: center;
            gap: 8px;
            transition: all 0.3s ease;
            font-weight: 600;
            color: #2C5AA0;
        }

        .language-toggle:hover {
            transform: scale(1.05);
            box-shadow: 0 6px 12px rgba(0,0,0,0.15);
        }

        .language-toggle:active {
            transform: scale(0.98);
        }

        .search-box {
            padding: 12px 20px;
            font-size: 16px;
            border: none;
            border-radius: 25px;
            width: 300px;
            outline: none;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        .category-filter {
            padding: 12px 20px;
            font-size: 16px;
            border: none;
            border-radius: 25px;
            outline: none;
            cursor: pointer;
            background: white;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        .word-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .word-card {
            background: white;
            border-radius: 15px;
            padding: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            position: relative;
            overflow: hidden;
        }

        .word-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 15px rgba(0,0,0,0.2);
        }

        .word-card.active {
            background: linear-gradient(135deg, #4A90E2 0%, #E57373 100%);
            color: white;
        }

        .word-card.recording {
            background: linear-gradient(135deg, #E57373 0%, #FF6B6B 100%);
            color: white;
            animation: pulse 1.5s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.02); }
        }

        .french-word {
            font-size: 1.8em;
            font-weight: bold;
            margin-bottom: 10px;
            color: #4A90E2;
        }

        .word-card.active .french-word,
        .word-card.recording .french-word {
            color: white;
        }
        
        .main-word {
            font-size: 1.8em;
            font-weight: bold;
            margin-bottom: 10px;
            color: #4A90E2;
        }

        .word-card.active .main-word,
        .word-card.recording .main-word {
            color: white;
        }
        
        .translation-word {
            font-size: 1.3em;
            color: #555;
            margin-top: 10px;
            opacity: 0;
            max-height: 0;
            overflow: hidden;
            transition: all 0.3s ease;
        }

        .word-card.active .translation-word,
        .word-card.recording .translation-word {
            opacity: 1;
            max-height: 100px;
            color: white;
            font-weight: 500;
        }

        .category-tag {
            display: inline-block;
            background: #E3F2FD;
            padding: 5px 12px;
            border-radius: 15px;
            font-size: 0.85em;
            margin-bottom: 10px;
            color: #2C5AA0;
        }

        .word-card.active .category-tag,
        .word-card.recording .category-tag {
            background: rgba(255, 255, 255, 0.9);
            color: #2C5AA0;
        }

        .english-translation {
            font-size: 1.3em;
            color: #555;
            margin-top: 10px;
            opacity: 0;
            max-height: 0;
            overflow: hidden;
            transition: all 0.3s ease;
        }

        .word-card.active .english-translation {
            opacity: 1;
            max-height: 100px;
            color: white;
            font-weight: 500;
        }
        
        .word-card.recording .english-translation {
            color: white;
            font-weight: 500;
        }

        .speaker-icon {
            position: absolute;
            top: 15px;
            right: 15px;
            font-size: 1.5em;
            opacity: 0.6;
        }

        .word-card.active .speaker-icon,
        .word-card.recording .speaker-icon {
            opacity: 1;
        }

        .pronunciation-section {
            margin-top: 15px;
            padding-top: 15px;
            border-top: 2px solid rgba(255, 255, 255, 0.3);
            opacity: 0;
            max-height: 0;
            overflow: hidden;
            transition: all 0.3s ease;
        }

        .word-card.active .pronunciation-section {
            opacity: 1;
            max-height: 200px;
        }

        .mic-button {
            background: white;
            color: #E57373;
            border: none;
            padding: 10px 20px;
            border-radius: 25px;
            font-size: 1em;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            margin: 10px auto;
            transition: all 0.3s ease;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }

        .mic-button:hover {
            transform: scale(1.05);
            box-shadow: 0 4px 8px rgba(0,0,0,0.3);
        }

        .mic-button.recording {
            background: #FF6B6B;
            color: white;
            animation: pulse-button 1s ease-in-out infinite;
        }

        @keyframes pulse-button {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        .pronunciation-score {
            text-align: center;
            margin-top: 10px;
            font-size: 1.5em;
            font-weight: bold;
            color: white;
        }

        .score-excellent { color: #4CAF50; }
        .score-good { color: #8BC34A; }
        .score-fair { color: #FFC107; }
        .score-poor { color: #FF9800; }

        .pronunciation-feedback {
            text-align: center;
            margin-top: 5px;
            font-size: 0.9em;
            color: rgba(255, 255, 255, 0.9);
        }

        .stats {
            text-align: center;
            color: #2C5AA0;
            font-size: 1.1em;
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            padding: 15px;
            border-radius: 15px;
            border: 3px solid #E57373;
        }

        .browser-warning {
            background: #FFF3CD;
            color: #856404;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            text-align: center;
            display: none;
        }

        @media (max-width: 768px) {
            h1 {
                font-size: 2em;
            }
            
            .word-grid {
                grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üá´üá∑ Learn 520 French Words with Pronunciation</h1>
            <p class="subtitle">Click on any word to hear it, then record your pronunciation!</p>
        </header>

        <div class="browser-warning" id="browserWarning">
            ‚ö†Ô∏è Speech recognition may not be fully supported in your browser. For best results, use Chrome or Edge.
        </div>

        <div class="controls">
            <input type="text" class="search-box" id="searchBox" placeholder="Search French or English...">
            <select class="category-filter" id="categoryFilter">
                <option value="all">All Categories</option>
                <option value="Basics">Basics</option>
                <option value="Numbers">Numbers</option>
                <option value="Colors">Colors</option>
                <option value="Family">Family</option>
                <option value="Food">Food</option>
                <option value="Animals">Animals</option>
                <option value="Body">Body Parts</option>
                <option value="Time">Time</option>
                <option value="Weather">Weather</option>
                <option value="Home">Home</option>
                <option value="Clothing">Clothing</option>
                <option value="Verbs">Common Verbs</option>
                <option value="Adjectives">Adjectives</option>
                <option value="Places">Places</option>
                <option value="Travel">Travel</option>
                <option value="School">School</option>
                <option value="Work">Work</option>
                <option value="Sports">Sports</option>
                <option value="Music">Music</option>
                <option value="Nature">Nature</option>
                <option value="Transportation">Transportation</option>
                <option value="Technology">Technology</option>
                <option value="Emotions">Emotions</option>
                <option value="Shopping">Shopping</option>
                <option value="Health">Health</option>
                <option value="Days">Days of Week</option>
                <option value="Months">Months</option>
                <option value="Seasons">Seasons</option>
                <option value="Questions">Question Words</option>
                <option value="Prepositions">Prepositions</option>
            </select>
            <button class="language-toggle" id="languageToggle">
                <span>üîÑ</span>
                <span id="toggleText">FR ‚Üí EN</span>
            </button>
        </div>

        <div class="word-grid" id="wordGrid"></div>

        <div class="stats" id="stats">
            Click on words to practice! ‚Ä¢ Total words: 520
        </div>
    </div>

    <script>
        // 520 French words organized by category
        const vocabulary = [
            // Basics (15 words)
            { french: "Bonjour", english: "Hello", category: "Basics" },
            { french: "Au revoir", english: "Goodbye", category: "Basics" },
            { french: "Merci", english: "Thank you", category: "Basics" },
            { french: "S'il vous pla√Æt", english: "Please", category: "Basics" },
            { french: "Oui", english: "Yes", category: "Basics" },
            { french: "Non", english: "No", category: "Basics" },
            { french: "Excusez-moi", english: "Excuse me", category: "Basics" },
            { french: "Pardon", english: "Sorry", category: "Basics" },
            { french: "Comment allez-vous?", english: "How are you?", category: "Basics" },
            { french: "Bien", english: "Good/Well", category: "Basics" },
            { french: "Mal", english: "Bad", category: "Basics" },
            { french: "Peut-√™tre", english: "Maybe", category: "Basics" },
            { french: "Maintenant", english: "Now", category: "Basics" },
            { french: "Toujours", english: "Always", category: "Basics" },
            { french: "Jamais", english: "Never", category: "Basics" },

            // Numbers (30 words)
            { french: "Un", english: "One", category: "Numbers" },
            { french: "Deux", english: "Two", category: "Numbers" },
            { french: "Trois", english: "Three", category: "Numbers" },
            { french: "Quatre", english: "Four", category: "Numbers" },
            { french: "Cinq", english: "Five", category: "Numbers" },
            { french: "Six", english: "Six", category: "Numbers" },
            { french: "Sept", english: "Seven", category: "Numbers" },
            { french: "Huit", english: "Eight", category: "Numbers" },
            { french: "Neuf", english: "Nine", category: "Numbers" },
            { french: "Dix", english: "Ten", category: "Numbers" },
            { french: "Onze", english: "Eleven", category: "Numbers" },
            { french: "Douze", english: "Twelve", category: "Numbers" },
            { french: "Treize", english: "Thirteen", category: "Numbers" },
            { french: "Quatorze", english: "Fourteen", category: "Numbers" },
            { french: "Quinze", english: "Fifteen", category: "Numbers" },
            { french: "Seize", english: "Sixteen", category: "Numbers" },
            { french: "Dix-sept", english: "Seventeen", category: "Numbers" },
            { french: "Dix-huit", english: "Eighteen", category: "Numbers" },
            { french: "Dix-neuf", english: "Nineteen", category: "Numbers" },
            { french: "Vingt", english: "Twenty", category: "Numbers" },
            { french: "Trente", english: "Thirty", category: "Numbers" },
            { french: "Quarante", english: "Forty", category: "Numbers" },
            { french: "Cinquante", english: "Fifty", category: "Numbers" },
            { french: "Soixante", english: "Sixty", category: "Numbers" },
            { french: "Soixante-dix", english: "Seventy", category: "Numbers" },
            { french: "Quatre-vingts", english: "Eighty", category: "Numbers" },
            { french: "Quatre-vingt-dix", english: "Ninety", category: "Numbers" },
            { french: "Cent", english: "One hundred", category: "Numbers" },
            { french: "Mille", english: "One thousand", category: "Numbers" },
            { french: "Million", english: "Million", category: "Numbers" },

            // Colors (10 words)
            { french: "Rouge", english: "Red", category: "Colors" },
            { french: "Bleu", english: "Blue", category: "Colors" },
            { french: "Vert", english: "Green", category: "Colors" },
            { french: "Jaune", english: "Yellow", category: "Colors" },
            { french: "Noir", english: "Black", category: "Colors" },
            { french: "Blanc", english: "White", category: "Colors" },
            { french: "Rose", english: "Pink", category: "Colors" },
            { french: "Orange", english: "Orange", category: "Colors" },
            { french: "Violet", english: "Purple", category: "Colors" },
            { french: "Gris", english: "Gray", category: "Colors" },

            // Family (15 words)
            { french: "Famille", english: "Family", category: "Family" },
            { french: "P√®re", english: "Father", category: "Family" },
            { french: "M√®re", english: "Mother", category: "Family" },
            { french: "Fr√®re", english: "Brother", category: "Family" },
            { french: "S≈ìur", english: "Sister", category: "Family" },
            { french: "Fils", english: "Son", category: "Family" },
            { french: "Fille", english: "Daughter", category: "Family" },
            { french: "Grand-p√®re", english: "Grandfather", category: "Family" },
            { french: "Grand-m√®re", english: "Grandmother", category: "Family" },
            { french: "Enfant", english: "Child", category: "Family" },
            { french: "Mari", english: "Husband", category: "Family" },
            { french: "Femme", english: "Wife", category: "Family" },
            { french: "Oncle", english: "Uncle", category: "Family" },
            { french: "Tante", english: "Aunt", category: "Family" },
            { french: "Cousin", english: "Cousin", category: "Family" },

            // Food (30 words)
            { french: "Pain", english: "Bread", category: "Food" },
            { french: "Eau", english: "Water", category: "Food" },
            { french: "Lait", english: "Milk", category: "Food" },
            { french: "Fromage", english: "Cheese", category: "Food" },
            { french: "Viande", english: "Meat", category: "Food" },
            { french: "Poisson", english: "Fish", category: "Food" },
            { french: "Fruit", english: "Fruit", category: "Food" },
            { french: "L√©gume", english: "Vegetable", category: "Food" },
            { french: "Pomme", english: "Apple", category: "Food" },
            { french: "Banane", english: "Banana", category: "Food" },
            { french: "Caf√©", english: "Coffee", category: "Food" },
            { french: "Th√©", english: "Tea", category: "Food" },
            { french: "Vin", english: "Wine", category: "Food" },
            { french: "Beurre", english: "Butter", category: "Food" },
            { french: "Sucre", english: "Sugar", category: "Food" },
            { french: "Sel", english: "Salt", category: "Food" },
            { french: "Poivre", english: "Pepper", category: "Food" },
            { french: "Riz", english: "Rice", category: "Food" },
            { french: "P√¢tes", english: "Pasta", category: "Food" },
            { french: "≈íuf", english: "Egg", category: "Food" },
            { french: "Poulet", english: "Chicken", category: "Food" },
            { french: "B≈ìuf", english: "Beef", category: "Food" },
            { french: "Porc", english: "Pork", category: "Food" },
            { french: "Orange", english: "Orange (fruit)", category: "Food" },
            { french: "Fraise", english: "Strawberry", category: "Food" },
            { french: "Raisin", english: "Grape", category: "Food" },
            { french: "Tomate", english: "Tomato", category: "Food" },
            { french: "Salade", english: "Salad/Lettuce", category: "Food" },
            { french: "Carotte", english: "Carrot", category: "Food" },
            { french: "Pomme de terre", english: "Potato", category: "Food" },

            // Animals (20 words)
            { french: "Chat", english: "Cat", category: "Animals" },
            { french: "Chien", english: "Dog", category: "Animals" },
            { french: "Oiseau", english: "Bird", category: "Animals" },
            { french: "Cheval", english: "Horse", category: "Animals" },
            { french: "Vache", english: "Cow", category: "Animals" },
            { french: "Cochon", english: "Pig", category: "Animals" },
            { french: "Mouton", english: "Sheep", category: "Animals" },
            { french: "Poule", english: "Chicken", category: "Animals" },
            { french: "Souris", english: "Mouse", category: "Animals" },
            { french: "Lapin", english: "Rabbit", category: "Animals" },
            { french: "Lion", english: "Lion", category: "Animals" },
            { french: "√âl√©phant", english: "Elephant", category: "Animals" },
            { french: "Tigre", english: "Tiger", category: "Animals" },
            { french: "Ours", english: "Bear", category: "Animals" },
            { french: "Singe", english: "Monkey", category: "Animals" },
            { french: "Serpent", english: "Snake", category: "Animals" },
            { french: "Poisson", english: "Fish", category: "Animals" },
            { french: "Requin", english: "Shark", category: "Animals" },
            { french: "Dauphin", english: "Dolphin", category: "Animals" },
            { french: "Papillon", english: "Butterfly", category: "Animals" },

            // Body Parts (15 words)
            { french: "T√™te", english: "Head", category: "Body" },
            { french: "≈íil", english: "Eye", category: "Body" },
            { french: "Nez", english: "Nose", category: "Body" },
            { french: "Bouche", english: "Mouth", category: "Body" },
            { french: "Oreille", english: "Ear", category: "Body" },
            { french: "Main", english: "Hand", category: "Body" },
            { french: "Pied", english: "Foot", category: "Body" },
            { french: "Bras", english: "Arm", category: "Body" },
            { french: "Jambe", english: "Leg", category: "Body" },
            { french: "C≈ìur", english: "Heart", category: "Body" },
            { french: "Doigt", english: "Finger", category: "Body" },
            { french: "Cheveux", english: "Hair", category: "Body" },
            { french: "Dent", english: "Tooth", category: "Body" },
            { french: "Langue", english: "Tongue", category: "Body" },
            { french: "Estomac", english: "Stomach", category: "Body" },

            // Time (15 words)
            { french: "Jour", english: "Day", category: "Time" },
            { french: "Nuit", english: "Night", category: "Time" },
            { french: "Matin", english: "Morning", category: "Time" },
            { french: "Soir", english: "Evening", category: "Time" },
            { french: "Heure", english: "Hour", category: "Time" },
            { french: "Semaine", english: "Week", category: "Time" },
            { french: "Mois", english: "Month", category: "Time" },
            { french: "Ann√©e", english: "Year", category: "Time" },
            { french: "Minute", english: "Minute", category: "Time" },
            { french: "Seconde", english: "Second", category: "Time" },
            { french: "Aujourd'hui", english: "Today", category: "Time" },
            { french: "Demain", english: "Tomorrow", category: "Time" },
            { french: "Hier", english: "Yesterday", category: "Time" },
            { french: "Apr√®s-midi", english: "Afternoon", category: "Time" },
            { french: "Minuit", english: "Midnight", category: "Time" },

            // Weather (10 words)
            { french: "Soleil", english: "Sun", category: "Weather" },
            { french: "Pluie", english: "Rain", category: "Weather" },
            { french: "Neige", english: "Snow", category: "Weather" },
            { french: "Vent", english: "Wind", category: "Weather" },
            { french: "Nuage", english: "Cloud", category: "Weather" },
            { french: "Chaud", english: "Hot", category: "Weather" },
            { french: "Froid", english: "Cold", category: "Weather" },
            { french: "Orage", english: "Storm", category: "Weather" },
            { french: "Brouillard", english: "Fog", category: "Weather" },
            { french: "Glace", english: "Ice", category: "Weather" },

            // Home (15 words)
            { french: "Maison", english: "House", category: "Home" },
            { french: "Porte", english: "Door", category: "Home" },
            { french: "Fen√™tre", english: "Window", category: "Home" },
            { french: "Table", english: "Table", category: "Home" },
            { french: "Chaise", english: "Chair", category: "Home" },
            { french: "Lit", english: "Bed", category: "Home" },
            { french: "Cuisine", english: "Kitchen", category: "Home" },
            { french: "Salle de bain", english: "Bathroom", category: "Home" },
            { french: "Salon", english: "Living room", category: "Home" },
            { french: "Chambre", english: "Bedroom", category: "Home" },
            { french: "Jardin", english: "Garden", category: "Home" },
            { french: "Toit", english: "Roof", category: "Home" },
            { french: "Escalier", english: "Stairs", category: "Home" },
            { french: "Mur", english: "Wall", category: "Home" },
            { french: "Sol", english: "Floor", category: "Home" },

            // Clothing (15 words)
            { french: "V√™tement", english: "Clothing", category: "Clothing" },
            { french: "Chemise", english: "Shirt", category: "Clothing" },
            { french: "Pantalon", english: "Pants", category: "Clothing" },
            { french: "Robe", english: "Dress", category: "Clothing" },
            { french: "Chaussure", english: "Shoe", category: "Clothing" },
            { french: "Chapeau", english: "Hat", category: "Clothing" },
            { french: "Manteau", english: "Coat", category: "Clothing" },
            { french: "Jupe", english: "Skirt", category: "Clothing" },
            { french: "Cravate", english: "Tie", category: "Clothing" },
            { french: "Chaussette", english: "Sock", category: "Clothing" },
            { french: "Gant", english: "Glove", category: "Clothing" },
            { french: "√âcharpe", english: "Scarf", category: "Clothing" },
            { french: "Pull", english: "Sweater", category: "Clothing" },
            { french: "Veste", english: "Jacket", category: "Clothing" },
            { french: "Short", english: "Shorts", category: "Clothing" },

            // Common Verbs (30 words)
            { french: "√ätre", english: "To be", category: "Verbs" },
            { french: "Avoir", english: "To have", category: "Verbs" },
            { french: "Faire", english: "To do/make", category: "Verbs" },
            { french: "Aller", english: "To go", category: "Verbs" },
            { french: "Venir", english: "To come", category: "Verbs" },
            { french: "Manger", english: "To eat", category: "Verbs" },
            { french: "Boire", english: "To drink", category: "Verbs" },
            { french: "Parler", english: "To speak", category: "Verbs" },
            { french: "Voir", english: "To see", category: "Verbs" },
            { french: "Prendre", english: "To take", category: "Verbs" },
            { french: "Donner", english: "To give", category: "Verbs" },
            { french: "Dire", english: "To say/tell", category: "Verbs" },
            { french: "Savoir", english: "To know (facts)", category: "Verbs" },
            { french: "Conna√Ætre", english: "To know (people)", category: "Verbs" },
            { french: "Pouvoir", english: "To be able to/can", category: "Verbs" },
            { french: "Vouloir", english: "To want", category: "Verbs" },
            { french: "Devoir", english: "To have to/must", category: "Verbs" },
            { french: "Aimer", english: "To like/love", category: "Verbs" },
            { french: "Penser", english: "To think", category: "Verbs" },
            { french: "Trouver", english: "To find", category: "Verbs" },
            { french: "Regarder", english: "To watch/look at", category: "Verbs" },
            { french: "√âcouter", english: "To listen", category: "Verbs" },
            { french: "Lire", english: "To read", category: "Verbs" },
            { french: "√âcrire", english: "To write", category: "Verbs" },
            { french: "Dormir", english: "To sleep", category: "Verbs" },
            { french: "Ouvrir", english: "To open", category: "Verbs" },
            { french: "Fermer", english: "To close", category: "Verbs" },
            { french: "Acheter", english: "To buy", category: "Verbs" },
            { french: "Vendre", english: "To sell", category: "Verbs" },
            { french: "Comprendre", english: "To understand", category: "Verbs" },

            // Adjectives (30 words)
            { french: "Grand", english: "Big/Tall", category: "Adjectives" },
            { french: "Petit", english: "Small/Short", category: "Adjectives" },
            { french: "Beau", english: "Beautiful/Handsome", category: "Adjectives" },
            { french: "Joli", english: "Pretty", category: "Adjectives" },
            { french: "Laid", english: "Ugly", category: "Adjectives" },
            { french: "Jeune", english: "Young", category: "Adjectives" },
            { french: "Vieux", english: "Old", category: "Adjectives" },
            { french: "Nouveau", english: "New", category: "Adjectives" },
            { french: "Ancien", english: "Old/Ancient", category: "Adjectives" },
            { french: "Bon", english: "Good", category: "Adjectives" },
            { french: "Mauvais", english: "Bad", category: "Adjectives" },
            { french: "Facile", english: "Easy", category: "Adjectives" },
            { french: "Difficile", english: "Difficult", category: "Adjectives" },
            { french: "Content", english: "Happy/Pleased", category: "Adjectives" },
            { french: "Triste", english: "Sad", category: "Adjectives" },
            { french: "Rapide", english: "Fast", category: "Adjectives" },
            { french: "Lent", english: "Slow", category: "Adjectives" },
            { french: "Fort", english: "Strong", category: "Adjectives" },
            { french: "Faible", english: "Weak", category: "Adjectives" },
            { french: "Riche", english: "Rich", category: "Adjectives" },
            { french: "Pauvre", english: "Poor", category: "Adjectives" },
            { french: "Cher", english: "Expensive/Dear", category: "Adjectives" },
            { french: "Bon march√©", english: "Cheap", category: "Adjectives" },
            { french: "Propre", english: "Clean", category: "Adjectives" },
            { french: "Sale", english: "Dirty", category: "Adjectives" },
            { french: "Plein", english: "Full", category: "Adjectives" },
            { french: "Vide", english: "Empty", category: "Adjectives" },
            { french: "Long", english: "Long", category: "Adjectives" },
            { french: "Court", english: "Short", category: "Adjectives" },
            { french: "Large", english: "Wide", category: "Adjectives" },

            // Places (20 words)
            { french: "Ville", english: "City", category: "Places" },
            { french: "Village", english: "Village", category: "Places" },
            { french: "Pays", english: "Country", category: "Places" },
            { french: "Rue", english: "Street", category: "Places" },
            { french: "Avenue", english: "Avenue", category: "Places" },
            { french: "Place", english: "Square", category: "Places" },
            { french: "Parc", english: "Park", category: "Places" },
            { french: "√âcole", english: "School", category: "Places" },
            { french: "Universit√©", english: "University", category: "Places" },
            { french: "H√¥pital", english: "Hospital", category: "Places" },
            { french: "Banque", english: "Bank", category: "Places" },
            { french: "Restaurant", english: "Restaurant", category: "Places" },
            { french: "Caf√©", english: "Caf√©", category: "Places" },
            { french: "Magasin", english: "Store", category: "Places" },
            { french: "March√©", english: "Market", category: "Places" },
            { french: "Biblioth√®que", english: "Library", category: "Places" },
            { french: "Mus√©e", english: "Museum", category: "Places" },
            { french: "Cin√©ma", english: "Cinema", category: "Places" },
            { french: "√âglise", english: "Church", category: "Places" },
            { french: "Plage", english: "Beach", category: "Places" },

            // Travel (15 words)
            { french: "Voyage", english: "Trip/Journey", category: "Travel" },
            { french: "Vacances", english: "Vacation", category: "Travel" },
            { french: "Touriste", english: "Tourist", category: "Travel" },
            { french: "Guide", english: "Guide", category: "Travel" },
            { french: "Carte", english: "Map", category: "Travel" },
            { french: "Billet", english: "Ticket", category: "Travel" },
            { french: "Passeport", english: "Passport", category: "Travel" },
            { french: "Valise", english: "Suitcase", category: "Travel" },
            { french: "H√¥tel", english: "Hotel", category: "Travel" },
            { french: "Chambre", english: "Room", category: "Travel" },
            { french: "R√©servation", english: "Reservation", category: "Travel" },
            { french: "A√©roport", english: "Airport", category: "Travel" },
            { french: "Gare", english: "Train station", category: "Travel" },
            { french: "D√©part", english: "Departure", category: "Travel" },
            { french: "Arriv√©e", english: "Arrival", category: "Travel" },

            // School (15 words)
            { french: "√âl√®ve", english: "Student", category: "School" },
            { french: "Professeur", english: "Teacher", category: "School" },
            { french: "Classe", english: "Class", category: "School" },
            { french: "Le√ßon", english: "Lesson", category: "School" },
            { french: "Cours", english: "Course", category: "School" },
            { french: "Examen", english: "Exam", category: "School" },
            { french: "Devoirs", english: "Homework", category: "School" },
            { french: "Livre", english: "Book", category: "School" },
            { french: "Cahier", english: "Notebook", category: "School" },
            { french: "Stylo", english: "Pen", category: "School" },
            { french: "Crayon", english: "Pencil", category: "School" },
            { french: "Tableau", english: "Board", category: "School" },
            { french: "Bureau", english: "Desk", category: "School" },
            { french: "√âtudier", english: "To study", category: "School" },
            { french: "Apprendre", english: "To learn", category: "School" },

            // Work (15 words)
            { french: "Travail", english: "Work", category: "Work" },
            { french: "Emploi", english: "Job", category: "Work" },
            { french: "Bureau", english: "Office", category: "Work" },
            { french: "Patron", english: "Boss", category: "Work" },
            { french: "Coll√®gue", english: "Colleague", category: "Work" },
            { french: "R√©union", english: "Meeting", category: "Work" },
            { french: "Projet", english: "Project", category: "Work" },
            { french: "Salaire", english: "Salary", category: "Work" },
            { french: "Contrat", english: "Contract", category: "Work" },
            { french: "Entreprise", english: "Company", category: "Work" },
            { french: "Client", english: "Client", category: "Work" },
            { french: "Ordinateur", english: "Computer", category: "Work" },
            { french: "Email", english: "Email", category: "Work" },
            { french: "Document", english: "Document", category: "Work" },
            { french: "T√©l√©phone", english: "Telephone", category: "Work" },

            // Sports (15 words)
            { french: "Sport", english: "Sport", category: "Sports" },
            { french: "Football", english: "Soccer", category: "Sports" },
            { french: "Tennis", english: "Tennis", category: "Sports" },
            { french: "Basketball", english: "Basketball", category: "Sports" },
            { french: "Natation", english: "Swimming", category: "Sports" },
            { french: "Cyclisme", english: "Cycling", category: "Sports" },
            { french: "Course", english: "Running/Race", category: "Sports" },
            { french: "√âquipe", english: "Team", category: "Sports" },
            { french: "Joueur", english: "Player", category: "Sports" },
            { french: "Match", english: "Match/Game", category: "Sports" },
            { french: "Victoire", english: "Victory", category: "Sports" },
            { french: "D√©faite", english: "Defeat", category: "Sports" },
            { french: "Ballon", english: "Ball", category: "Sports" },
            { french: "Stade", english: "Stadium", category: "Sports" },
            { french: "Entra√Ænement", english: "Training", category: "Sports" },

            // Music (10 words)
            { french: "Musique", english: "Music", category: "Music" },
            { french: "Chanson", english: "Song", category: "Music" },
            { french: "Chanteur", english: "Singer", category: "Music" },
            { french: "Musicien", english: "Musician", category: "Music" },
            { french: "Guitare", english: "Guitar", category: "Music" },
            { french: "Piano", english: "Piano", category: "Music" },
            { french: "Violon", english: "Violin", category: "Music" },
            { french: "Tambour", english: "Drum", category: "Music" },
            { french: "Concert", english: "Concert", category: "Music" },
            { french: "Orchestre", english: "Orchestra", category: "Music" },

            // Nature (15 words)
            { french: "Nature", english: "Nature", category: "Nature" },
            { french: "Arbre", english: "Tree", category: "Nature" },
            { french: "Fleur", english: "Flower", category: "Nature" },
            { french: "Herbe", english: "Grass", category: "Nature" },
            { french: "Montagne", english: "Mountain", category: "Nature" },
            { french: "Mer", english: "Sea", category: "Nature" },
            { french: "Oc√©an", english: "Ocean", category: "Nature" },
            { french: "Rivi√®re", english: "River", category: "Nature" },
            { french: "Lac", english: "Lake", category: "Nature" },
            { french: "For√™t", english: "Forest", category: "Nature" },
            { french: "D√©sert", english: "Desert", category: "Nature" },
            { french: "√éle", english: "Island", category: "Nature" },
            { french: "Terre", english: "Earth/Ground", category: "Nature" },
            { french: "Ciel", english: "Sky", category: "Nature" },
            { french: "√âtoile", english: "Star", category: "Nature" },

            // Transportation (15 words)
            { french: "Voiture", english: "Car", category: "Transportation" },
            { french: "Bus", english: "Bus", category: "Transportation" },
            { french: "Train", english: "Train", category: "Transportation" },
            { french: "Avion", english: "Airplane", category: "Transportation" },
            { french: "Bateau", english: "Boat", category: "Transportation" },
            { french: "M√©tro", english: "Subway", category: "Transportation" },
            { french: "V√©lo", english: "Bicycle", category: "Transportation" },
            { french: "Moto", english: "Motorcycle", category: "Transportation" },
            { french: "Taxi", english: "Taxi", category: "Transportation" },
            { french: "Camion", english: "Truck", category: "Transportation" },
            { french: "Route", english: "Road", category: "Transportation" },
            { french: "Autoroute", english: "Highway", category: "Transportation" },
            { french: "Pont", english: "Bridge", category: "Transportation" },
            { french: "Station", english: "Station", category: "Transportation" },
            { french: "Arr√™t", english: "Stop", category: "Transportation" },

            // Technology (10 words)
            { french: "Ordinateur", english: "Computer", category: "Technology" },
            { french: "T√©l√©phone", english: "Phone", category: "Technology" },
            { french: "Internet", english: "Internet", category: "Technology" },
            { french: "Email", english: "Email", category: "Technology" },
            { french: "Site web", english: "Website", category: "Technology" },
            { french: "Application", english: "App", category: "Technology" },
            { french: "Clavier", english: "Keyboard", category: "Technology" },
            { french: "Souris", english: "Mouse", category: "Technology" },
            { french: "√âcran", english: "Screen", category: "Technology" },
            { french: "Logiciel", english: "Software", category: "Technology" },

            // Emotions (15 words)
            { french: "Heureux", english: "Happy", category: "Emotions" },
            { french: "Triste", english: "Sad", category: "Emotions" },
            { french: "Col√®re", english: "Anger", category: "Emotions" },
            { french: "Peur", english: "Fear", category: "Emotions" },
            { french: "Amour", english: "Love", category: "Emotions" },
            { french: "Joie", english: "Joy", category: "Emotions" },
            { french: "Surprise", english: "Surprise", category: "Emotions" },
            { french: "Ennui", english: "Boredom", category: "Emotions" },
            { french: "Excit√©", english: "Excited", category: "Emotions" },
            { french: "Nerveux", english: "Nervous", category: "Emotions" },
            { french: "Calme", english: "Calm", category: "Emotions" },
            { french: "Inquiet", english: "Worried", category: "Emotions" },
            { french: "Confiant", english: "Confident", category: "Emotions" },
            { french: "Timide", english: "Shy", category: "Emotions" },
            { french: "Fatigu√©", english: "Tired", category: "Emotions" },

            // Shopping (10 words)
            { french: "Magasin", english: "Store", category: "Shopping" },
            { french: "Prix", english: "Price", category: "Shopping" },
            { french: "Argent", english: "Money", category: "Shopping" },
            { french: "Acheter", english: "To buy", category: "Shopping" },
            { french: "Vendre", english: "To sell", category: "Shopping" },
            { french: "Payer", english: "To pay", category: "Shopping" },
            { french: "Cher", english: "Expensive", category: "Shopping" },
            { french: "Pas cher", english: "Cheap", category: "Shopping" },
            { french: "Caisse", english: "Cash register", category: "Shopping" },
            { french: "Sac", english: "Bag", category: "Shopping" },

            // Health (10 words)
            { french: "Sant√©", english: "Health", category: "Health" },
            { french: "Maladie", english: "Illness", category: "Health" },
            { french: "M√©decin", english: "Doctor", category: "Health" },
            { french: "Infirmier", english: "Nurse", category: "Health" },
            { french: "M√©dicament", english: "Medicine", category: "Health" },
            { french: "Douleur", english: "Pain", category: "Health" },
            { french: "Fi√®vre", english: "Fever", category: "Health" },
            { french: "Rhume", english: "Cold", category: "Health" },
            { french: "Grippe", english: "Flu", category: "Health" },
            { french: "Blessure", english: "Injury", category: "Health" },

            // Days of the Week (7 words)
            { french: "Lundi", english: "Monday", category: "Days" },
            { french: "Mardi", english: "Tuesday", category: "Days" },
            { french: "Mercredi", english: "Wednesday", category: "Days" },
            { french: "Jeudi", english: "Thursday", category: "Days" },
            { french: "Vendredi", english: "Friday", category: "Days" },
            { french: "Samedi", english: "Saturday", category: "Days" },
            { french: "Dimanche", english: "Sunday", category: "Days" },

            // Months (12 words)
            { french: "Janvier", english: "January", category: "Months" },
            { french: "F√©vrier", english: "February", category: "Months" },
            { french: "Mars", english: "March", category: "Months" },
            { french: "Avril", english: "April", category: "Months" },
            { french: "Mai", english: "May", category: "Months" },
            { french: "Juin", english: "June", category: "Months" },
            { french: "Juillet", english: "July", category: "Months" },
            { french: "Ao√ªt", english: "August", category: "Months" },
            { french: "Septembre", english: "September", category: "Months" },
            { french: "Octobre", english: "October", category: "Months" },
            { french: "Novembre", english: "November", category: "Months" },
            { french: "D√©cembre", english: "December", category: "Months" },

            // Seasons (4 words)
            { french: "Printemps", english: "Spring", category: "Seasons" },
            { french: "√ât√©", english: "Summer", category: "Seasons" },
            { french: "Automne", english: "Autumn/Fall", category: "Seasons" },
            { french: "Hiver", english: "Winter", category: "Seasons" },

            // Question Words (10 words)
            { french: "Qui", english: "Who", category: "Questions" },
            { french: "Quoi", english: "What", category: "Questions" },
            { french: "O√π", english: "Where", category: "Questions" },
            { french: "Quand", english: "When", category: "Questions" },
            { french: "Pourquoi", english: "Why", category: "Questions" },
            { french: "Comment", english: "How", category: "Questions" },
            { french: "Combien", english: "How many/much", category: "Questions" },
            { french: "Quel", english: "Which/What", category: "Questions" },
            { french: "Lequel", english: "Which one", category: "Questions" },
            { french: "Est-ce que", english: "Question marker", category: "Questions" },

            // Prepositions (15 words)
            { french: "Dans", english: "In", category: "Prepositions" },
            { french: "Sur", english: "On", category: "Prepositions" },
            { french: "Sous", english: "Under", category: "Prepositions" },
            { french: "Avec", english: "With", category: "Prepositions" },
            { french: "Sans", english: "Without", category: "Prepositions" },
            { french: "Pour", english: "For", category: "Prepositions" },
            { french: "Contre", english: "Against", category: "Prepositions" },
            { french: "Entre", english: "Between", category: "Prepositions" },
            { french: "Devant", english: "In front of", category: "Prepositions" },
            { french: "Derri√®re", english: "Behind", category: "Prepositions" },
            { french: "Avant", english: "Before", category: "Prepositions" },
            { french: "Apr√®s", english: "After", category: "Prepositions" },
            { french: "Pendant", english: "During", category: "Prepositions" },
            { french: "Vers", english: "Towards", category: "Prepositions" },
            { french: "Chez", english: "At (someone's place)", category: "Prepositions" }
        ];

        let clickedWords = new Set();
        let currentFilter = 'all';
        let currentSearch = '';
        let recognition = null;
        let currentRecordingCard = null;
        let currentTargetWord = null;
        let languageMode = 'fr-en'; // 'fr-en' or 'en-fr'

        // Initialize the app
        function init() {
            renderWords(vocabulary);
            setupEventListeners();
            setupSpeechRecognition();
            
            // Load voices
            if (speechSynthesis.onvoiceschanged !== undefined) {
                speechSynthesis.onvoiceschanged = () => {
                    window.speechSynthesis.getVoices();
                };
            }
        }

        // Setup speech recognition
        function setupSpeechRecognition() {
            const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
            
            if (!SpeechRecognition) {
                document.getElementById('browserWarning').style.display = 'block';
                return;
            }

            recognition = new SpeechRecognition();
            updateRecognitionLanguage();
            recognition.continuous = false;
            recognition.interimResults = false;
            recognition.maxAlternatives = 5;

            recognition.onresult = (event) => {
                const results = event.results[0];
                const transcript = results[0].transcript.toLowerCase().trim();
                
                if (currentTargetWord && currentRecordingCard) {
                    const score = calculatePronunciationScore(transcript, currentTargetWord, results);
                    displayScore(score, currentRecordingCard);
                }
            };

            recognition.onerror = (event) => {
                console.error('Speech recognition error:', event.error);
                if (currentRecordingCard) {
                    stopRecording(currentRecordingCard);
                    const feedback = currentRecordingCard.querySelector('.pronunciation-feedback');
                    if (feedback) {
                        feedback.textContent = 'Error: Please try again';
                    }
                }
            };

            recognition.onend = () => {
                if (currentRecordingCard) {
                    stopRecording(currentRecordingCard);
                }
            };
        }
        
        // Update recognition language based on mode
        function updateRecognitionLanguage() {
            if (recognition) {
                recognition.lang = languageMode === 'fr-en' ? 'fr-FR' : 'en-US';
            }
        }

        // Calculate pronunciation score
        function calculatePronunciationScore(spoken, target, results) {
            // Normalize both strings
            const normalizeString = (str) => {
                return str.toLowerCase()
                    .normalize("NFD")
                    .replace(/[\u0300-\u036f]/g, "")
                    .replace(/[^a-z0-9\s]/g, "")
                    .trim();
            };

            const normalizedSpoken = normalizeString(spoken);
            const normalizedTarget = normalizeString(target);

            // Check if exact match
            if (normalizedSpoken === normalizedTarget) {
                return 100;
            }

            // Check all alternatives for matches
            let bestAlternativeScore = 0;
            for (let i = 0; i < results.length; i++) {
                const alternative = normalizeString(results[i].transcript);
                if (alternative === normalizedTarget) {
                    return 95;
                }
                const altScore = calculateLevenshteinSimilarity(alternative, normalizedTarget);
                bestAlternativeScore = Math.max(bestAlternativeScore, altScore);
            }

            // Calculate Levenshtein distance similarity
            const levenshteinScore = calculateLevenshteinSimilarity(normalizedSpoken, normalizedTarget);
            
            // Use the best score between direct comparison and alternatives
            const finalScore = Math.max(levenshteinScore, bestAlternativeScore);

            // Boost score if the words sound similar (checking substrings)
            if (normalizedTarget.includes(normalizedSpoken) || normalizedSpoken.includes(normalizedTarget)) {
                return Math.min(100, finalScore + 15);
            }

            return Math.round(finalScore);
        }

        // Calculate Levenshtein distance and convert to similarity percentage
        function calculateLevenshteinSimilarity(str1, str2) {
            const distance = levenshteinDistance(str1, str2);
            const maxLength = Math.max(str1.length, str2.length);
            const similarity = ((maxLength - distance) / maxLength) * 100;
            return Math.max(0, Math.min(100, similarity));
        }

        // Levenshtein distance algorithm
        function levenshteinDistance(str1, str2) {
            const matrix = [];

            for (let i = 0; i <= str2.length; i++) {
                matrix[i] = [i];
            }

            for (let j = 0; j <= str1.length; j++) {
                matrix[0][j] = j;
            }

            for (let i = 1; i <= str2.length; i++) {
                for (let j = 1; j <= str1.length; j++) {
                    if (str2.charAt(i - 1) === str1.charAt(j - 1)) {
                        matrix[i][j] = matrix[i - 1][j - 1];
                    } else {
                        matrix[i][j] = Math.min(
                            matrix[i - 1][j - 1] + 1,
                            matrix[i][j - 1] + 1,
                            matrix[i - 1][j] + 1
                        );
                    }
                }
            }

            return matrix[str2.length][str1.length];
        }

        // Display pronunciation score
        function displayScore(score, card) {
            let scoreClass, feedback;
            
            if (score >= 90) {
                scoreClass = 'score-excellent';
                feedback = 'Excellent! üåü';
            } else if (score >= 75) {
                scoreClass = 'score-good';
                feedback = 'Good job! üëç';
            } else if (score >= 60) {
                scoreClass = 'score-fair';
                feedback = 'Not bad! Keep practicing üìö';
            } else {
                scoreClass = 'score-poor';
                feedback = 'Keep trying! üí™';
            }

            const scoreElement = card.querySelector('.pronunciation-score');
            const feedbackElement = card.querySelector('.pronunciation-feedback');
            
            if (scoreElement && feedbackElement) {
                scoreElement.innerHTML = `${score}%`;
                scoreElement.className = `pronunciation-score ${scoreClass}`;
                feedbackElement.textContent = feedback;
            }
        }

        // Render word cards
        function renderWords(words) {
            const wordGrid = document.getElementById('wordGrid');
            wordGrid.innerHTML = '';

            words.forEach((word, index) => {
                const card = document.createElement('div');
                card.className = 'word-card';
                card.dataset.index = index;
                
                // Determine which language to show based on mode
                const mainWord = languageMode === 'fr-en' ? word.french : word.english;
                const translationWord = languageMode === 'fr-en' ? word.english : word.french;
                const targetPronunciation = mainWord;
                
                card.innerHTML = `
                    <span class="speaker-icon">üîä</span>
                    <div class="category-tag">${word.category}</div>
                    <div class="main-word">${mainWord}</div>
                    <div class="translation-word">${translationWord}</div>
                    <div class="pronunciation-section">
                        <button class="mic-button" data-word="${targetPronunciation}">
                            <span class="mic-icon">üé§</span>
                            <span class="mic-text">Record Pronunciation</span>
                        </button>
                        <div class="pronunciation-score"></div>
                        <div class="pronunciation-feedback"></div>
                    </div>
                `;

                card.addEventListener('click', (e) => {
                    // Don't trigger if clicking the mic button
                    if (!e.target.closest('.mic-button')) {
                        handleWordClick(word, card, index, mainWord, translationWord);
                    }
                });

                // Add mic button listener
                const micButton = card.querySelector('.mic-button');
                micButton.addEventListener('click', (e) => {
                    e.stopPropagation();
                    handleMicClick(targetPronunciation, card, micButton);
                });

                wordGrid.appendChild(card);
            });
        }

        // Handle word card click
        function handleWordClick(word, card, index, mainWord, translationWord) {
            card.classList.toggle('active');

            if (card.classList.contains('active')) {
                clickedWords.add(index);
                updateStats();

                // Speak main word first
                const mainLang = languageMode === 'fr-en' ? 'fr-FR' : 'en-US';
                const translationLang = languageMode === 'fr-en' ? 'en-US' : 'fr-FR';
                
                speakWord(mainWord, mainLang);

                setTimeout(() => {
                    speakWord(translationWord, translationLang);
                }, 1100);
            }
        }

        // Handle microphone button click
        function handleMicClick(targetWord, card, button) {
            if (!recognition) {
                alert('Speech recognition is not supported in your browser. Please use Chrome or Edge.');
                return;
            }

            // Make sure card is active
            if (!card.classList.contains('active')) {
                card.classList.add('active');
            }

            // If already recording, stop
            if (card.classList.contains('recording')) {
                recognition.stop();
                return;
            }

            // Clear previous score
            const scoreElement = card.querySelector('.pronunciation-score');
            const feedbackElement = card.querySelector('.pronunciation-feedback');
            scoreElement.textContent = '';
            feedbackElement.textContent = 'Listening...';

            // Start recording
            currentRecordingCard = card;
            currentTargetWord = targetWord;
            card.classList.add('recording');
            button.classList.add('recording');
            button.querySelector('.mic-text').textContent = 'Recording...';

            try {
                recognition.start();
            } catch (e) {
                console.error('Recognition start error:', e);
                stopRecording(card);
            }
        }

        // Stop recording
        function stopRecording(card) {
            card.classList.remove('recording');
            const button = card.querySelector('.mic-button');
            button.classList.remove('recording');
            button.querySelector('.mic-text').textContent = 'Record Pronunciation';
            currentRecordingCard = null;
            currentTargetWord = null;
        }

        // Text-to-speech function
        function speakWord(text, lang) {
            const utterance = new SpeechSynthesisUtterance(text);
            utterance.lang = lang;
            utterance.rate = 0.8;
            utterance.pitch = 1;
            utterance.volume = 1;

            const voices = window.speechSynthesis.getVoices();
            const matchingVoice = voices.find(voice => voice.lang.startsWith(lang.split('-')[0]));
            if (matchingVoice) {
                utterance.voice = matchingVoice;
            }

            setTimeout(() => {
                window.speechSynthesis.speak(utterance);
            }, 100);
        }

        // Setup event listeners
        function setupEventListeners() {
            const searchBox = document.getElementById('searchBox');
            const categoryFilter = document.getElementById('categoryFilter');
            const languageToggle = document.getElementById('languageToggle');

            searchBox.addEventListener('input', (e) => {
                currentSearch = e.target.value.toLowerCase();
                filterWords();
            });

            categoryFilter.addEventListener('change', (e) => {
                currentFilter = e.target.value;
                filterWords();
            });
            
            languageToggle.addEventListener('click', () => {
                // Toggle language mode
                languageMode = languageMode === 'fr-en' ? 'en-fr' : 'fr-en';
                
                // Update button text
                const toggleText = document.getElementById('toggleText');
                toggleText.textContent = languageMode === 'fr-en' ? 'FR ‚Üí EN' : 'EN ‚Üí FR';
                
                // Update recognition language
                updateRecognitionLanguage();
                
                // Re-render words
                filterWords();
            });
        }

        // Filter words
        function filterWords() {
            let filtered = vocabulary;

            if (currentFilter !== 'all') {
                filtered = filtered.filter(word => word.category === currentFilter);
            }

            if (currentSearch) {
                filtered = filtered.filter(word => 
                    word.french.toLowerCase().includes(currentSearch) ||
                    word.english.toLowerCase().includes(currentSearch)
                );
            }

            renderWords(filtered);
        }

        // Update statistics
        function updateStats() {
            const stats = document.getElementById('stats');
            const percentage = Math.round((clickedWords.size / vocabulary.length) * 100);
            stats.textContent = `Words practiced: ${clickedWords.size} / ${vocabulary.length} (${percentage}%) ‚Ä¢ Keep going! üéØ`;
        }

        // Initialize the app
        init();
    </script>
</body>
</html>